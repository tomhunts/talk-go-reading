## 30 | 套路篇：如何迅速分析出系统I/O的瓶颈在哪里？

### 文件系统I/O性能指标

+ 存储空间的使用情况，包括容量、使用量以及剩余空间。这些只是文件系统向外展示的空间使用，而并非在磁盘空间的真实使用量，因为文件系统的元数据也会占用磁盘空间。
+ 索引节点的使用情况，它也包括容量、使用量以及剩余量等三个指标。
+ 缓存使用情况，包括页缓存、目录项缓存、索引节点缓存以及各个具体文件系统的缓存。
+ 文件I/O，包括IOPS，响应时间以及吞吐量等。

### 磁盘I/O性能指标

相比较文件系统磁盘性能的数据更加详细

四个核心磁盘I/O指标

+ 使用率：磁盘忙处理I/O请求的百分比，过高的使用率通常意味着磁盘I/O存在性能瓶颈
+ IOPS：每秒的I/O请求数
+ 吞吐量：每秒I/O的请求大小
+ 形影时间：从发出I/O请求到收到响应的间隔时间


### 性能工具
+ df 查看文件系统数据的空间容量，也可以查看索引节点的容量
+ /proc/meminfo /proc/slabinfo等：观察页缓存，目录项缓存，索引节点缓存。以及具体文件系统的缓存情况
+ iostat、pidstat：官产磁盘和进程的I/O情况

有两张图片分别为 工具-性能，性能-工具。分别进行查看

### 如何迅速分析I/O的性能瓶颈

大致思路：

+ 先用iostat发现磁盘的I/O性能瓶颈
+ 再借助pidstat，定位出导致瓶颈的进程
+ 随后分析进程的I/O行为
+ 结合应用程序的原理，分析来源

查看图片：快速排查I/O问题







